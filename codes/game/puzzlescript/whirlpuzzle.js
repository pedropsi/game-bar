var sourceCode="(- Pedro PSI 2018-2019                                                              -)                                                     \n(- Version nº 22/01/2019                                                            -)                                                     \n(- License: Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)-)\n(------------------------------------------------------------------------------------)\n\ntitle Whirlpuzzle\nauthor Pedro PSI\nhomepage pedropsi.github.io\n\nbackground_color #030230 (dark blue)\ntext_color #FFC30F (bright orange)\n\nrealtime_interval 0.1666\nkey_repeat_interval 0.1666\nthrottle_movement\n\nrun_rules_on_level_start\nyoutube ftxXtgcEmXk (I'm in Space! by Tim Beek)\n\n\n(Palette\n----------\n#6967CA (light blue)\n#2A27C7 (bright blue)\n#030230 (dark blue)\n\n#A7ED64 (light green)\n#7AEC0D (bright green)\n#489400 (green)\n\n#FFFE6C (light yellow)\n#FFFD0F (bright yellow)      \n\n#FFDA6C (light orange)\n#FFC30F (bright orange)\n\n#FF9703 (player orange)\n#FF8403 (pdayer orange)\n\n)\n\n========\nOBJECTS\n========\nbackground .\n#FFC30F (bright orange)\n\ntile1 \n#6967CA (light blue) #2A27C7 (bright blue)\n11110\n00010\n01010\n01110\n00000\n\ntile2\n#6967CA (light blue) #2A27C7 (bright blue)\n00000\n11110\n10010\n10110\n10000\n\ntile3\n#6967CA (light blue) #2A27C7 (bright blue)\n00000\n01110\n01010\n01000\n01111\n\ntile4\n#6967CA (light blue) #2A27C7 (bright blue)\n00001\n01101\n01001\n01111\n00000\n\nWall +\n#030230 (dark blue)\n\nborderD \ntransparent #6967CA (light blue)\n00000\n00000\n00000\n00000\n11111\n\nborderU\ntransparent #6967CA (light blue)\n11111\n00000\n00000\n00000\n00000\n\nborderR\ntransparent #6967CA (light blue)\n00001\n00001\n00001\n00001\n00001\n\nborderL\ntransparent #6967CA (light blue)\n10000\n10000\n10000\n10000\n10000\n\n\nblock1 a\n#A7ED64 (light green)\n\nblock2 e\n#7AEC0D (bright green)\n\nblock3 i\n#FFFE6C (light yellow)\n\nblock4 o\n#FFFD0F (bright yellow)  \n\nblock5 u\n#FFC30F (bright orange)\n\nblock6 y\n#FFDA6C (light orange)    \n\nplayer\n#FF9703 (player orange)  #FF8403 (pdayer orange)\n.000.\n00000\n10001\n.111.\n.1.1.\n\nGoal * \n#6967CA (light blue) #FF9703 (player orange)\n00000\n01010\n00100\n01010\n00000\n\n\n(detect gravity)\nfallen\ntransparent\n\nFixedL\nwhite\n.....\n.....\n00...\n.....\n.....\n\nFixedU\nwhite\n..0..\n..0..\n.....\n.....\n.....\nFixedR\nwhite\n.....\n.....\n...00\n.....\n.....\nFixedD\nwhite\n.....\n.....\n.....\n..0..\n..0..\n\nFromL\nblack\n.....\n00...\n.....\n.....\n.....\n\nFromU\nblack\n...0.\n...0.\n.....\n.....\n.....\n\nFromR\nblack\n.....\n.....\n.....\n...00\n.....\n\nFromD\nblack\n.....\n.....\n.....\n.0...\n.0...\n\n(DECORATIVE STARS)\n(----------------)\n\nStar\n#FFC30F (bright orange)\n.....\n.....\n..0..\n.....\n.....\n\n(counting the period of star pulses, for decoration)\nstarshine stsh\ntransparent\nS1\ntransparent\nS2\ntransparent\nS3\ntransparent\nS4\ntransparent\nS5\ntransparent\nS6\ntransparent\nS7\ntransparent\n\n\n\n\n(COPY)\n(----)\n\nrotated \ntransparent\n\nSourceArea S\n#030230 (dark blue)\nTargetArea T\ntransparent\n\nLimit\ntransparent\n\nPassed\nblue\n.....\n.....\n..0..\n.....\n.....\n\nAr\n#7AEC0D (green)\n.....\n.00..\n..00.\n.00..\n.....\n\nAl\n#7AEC0D (green)\n.....\n..00.\n.00..\n..00.\n.....\n\nAd\n#7AEC0D (green)\n.....\n.0.0.\n.000.\n..0..\n.....\n\nAu\n#7AEC0D (green)\n.....\n..0..\n.000.\n.0.0.\n.....\n\nKiteLauncher »\n#030230 (dark blue)\nKiteStaller « \n#030230 (dark blue)\nKiteStallerBlock = \n#030230 (dark blue)\n(red\n00000\n.....\n00000\n.....\n00000)\n\nKiteLaunched L\ntransparent\n\nFlipKite F\ntransparent\nMoveKite M\ntransparent\n\nFlip90\ntransparent\nFlip180 \ntransparent\nFlip270\ntransparent\nFlip360\ntransparent\n\nReverse Rv\ntransparent(\nred\n.....\n.....\n.....\n.000.\n.....)\n\nForward Fw\ntransparent (\ngreen\n.....\n.....\n.....\n.000.\n.....)\n\nSwitchFlow Wv\ntransparent\nDone X\ntransparent\n\n(SLOW MODE)\n(---------)\n\nslowmode\ntransparent\n\nRotateMarkR\n#FFC30F (bright orange) #030230 (dark blue)\n11...\n001.1\n..010\n..100\n..000\n\nRotateMarkL\n#FFC30F (bright orange) #030230 (dark blue)\n...11\n1.100\n010..\n001..\n000..\n\nCornerLeft\ntransparent\nCornerRight\ntransparent\nCornerFinder\ntransparent\n\nBlockRotateMarkRight BR\ntransparent\nBlockRotateMarkleft BL\ntransparent\n\n\n=======\nLEGEND\n=======\n(Game)\nP = Player and Fw and S\n# = Limit and Wall\n} = RotateMarkR \n{ = RotateMarkL \n\n\nBlock = a or e or i or o or u or y\nItem = Player or Wall or Block\n\nPusher = Player or Block\nPushable = Pusher\nUnPushable = Wall \n\nObject = Item\n\nborder = borderL or borderU or borderR or borderD\nTiles = Tile1 or Tile2 or tile3 or tile4\n\nFixed = FixedL or FixedR or FixedU or FixedD \nFrom = FromL or FromR or FromU or FromD \n\n\n\n\n(Copy)\nAs = Ar or Al or Au or Ad\n\nAad = Ad and F\nAal = Al and F\nAau = Au and F\nAar = Ar and F\nCopyable = Item or Goal\n\nArea = SourceArea or TargetArea\nKiteMachine= KiteLauncher or KiteStaller \nFilled = Limit or Passed or Kitemachine\n\nKiteStates=FlipKite or MoveKite\nKiteFlipAngle = Flip90 or Flip180 or Flip270 or Flip360\n@ = KiteFlipAngle\n\nFlow = Fw or Rv\n\nStarArea = Wall or SourceArea\nStardust = S1 or S2 or S3 or S4 or S5 or S6 or S7\n\nwaitgravity = as or L or rotated or slowmode\nrotatemark = rotatemarkl or rotatemarkr\nblockrotatemarks = blockrotatemarkLeft or blockrotatemarkRight\n\ncorners= CornerLeft or CornerRight \n\n=======\nSOUNDS\n=======\n\n================\nCOLLISIONLAYERS\n================\n(Game Layers)\nBackground\nTiles\nGoal\nItem\n\nFixedL\nFixedU\nFixedR\nFixedD\n\nFromL\nFromU\nFromR\nFromD\n\nfallen\nrotated\nslowmode\n\n(Copy Mechanism layers)\nArea\nAs, Filled\nKiteStates\nKiteFlipAngle\nKiteLaunched\nKiteStallerBlock\nFlow\nSwitchFlow\nDone\n\n(decoration)\nborderL\nborderU\nborderR\nborderD\n\nstar\nstardust\nstarshine\n\nrotatemark\nblockrotatemarkLeft\nblockrotatemarkRight\ncorners\ncornerfinder\n\n======\nRULES     \n======\n(--Run rules once and disable further movement when falling--)\n[player no tiles]->[up player]\n\n[fallen][moving player]->[][player]\n[fallen]->[]\n[rotated]->[]\n\n[border]->[no border]\n\n(----------------------------------------------------\n----------------- COPY MECHANISM --------------------\n----------------------------------------------------)\n\n(Expand Source/Target Areas)\n(---------------------------------------------------)\n[Player no Area]->[Player S]\n[S|no S no Limit]->[S|S]\n[Kitemachine no Area]->[KiteMachine T]\n[T|no T no Limit]->[T|T]\n\n(Placement of Rotation Arrows at the top corners)\n(---------------------------------------------------)\n[T no CornerFinder no Kitemachine]->[T CornerFinder]\nup [CornerFinder T |...| CornerFinder T]->[T|...|T CornerFinder]\n\n(left arrow)\nleft  [CornerFinder T |...| CornerFinder T]->[T|...|T CornerFinder]\nright [CornerFinder T Wall| T Wall|...|T no Wall]->[T Wall|T Wall CornerFinder|...|T]\ndown  [CornerFinder T Wall| T Wall|...|T no Wall]->[T Wall|T Wall CornerFinder|...|T]\n[CornerFinder no CornerLeft]->[CornerFinder CornerLeft]\n\n(right arrow)\nright [cornerfinder T|T no cornerfinder no kitemachine]->[T|T cornerfinder]\nleft  [CornerFinder T Wall| T Wall|...|T no Wall]->[T Wall|T Wall CornerFinder|...|T]\n[CornerFinder]->[CornerRight]\n\n(small adjustments)\nrandom right [cornerRight|]->[|cornerRight]\nrandom left  [cornerLeft |]->[|cornerLeft ]\n\nrandom up  [cornerRight|]->[|cornerRight]\nrandom up  [cornerLeft |]->[|cornerLeft ]\n\n(Start Action)\n(---------------------------------------------------)\n(slow mode: exit and erase marks)\n[blockrotatemarks][action   player]->[][action player]\n[blockrotatemarks][vertical player]->[][vertical player]\n[slowmode][action   player]->[][player]\n[slowmode][vertical player]->[][player]\n\n(slow mode: start)\n[action player]->[slowmode player]\n\n(slow mode: place arrows)\n[rotatemark]->[]\n[slowmode][cornerLeft  no rotatemark]->[slowmode][{]\n[slowmode][cornerRight no rotatemark]->[slowmode][}]\n[BR][}]->[BR][]\n[BL][{]->[BL][]\n[corners]->[]\n\n(slow mode: block 180º rotation)\n[slowmode][right player][BR]->[slowmode][player][BR]\n[slowmode][left player ][BL]->[slowmode][player][BL]\n\n(slow mode: renable blocked rotation)\n[slowmode][left  player][BR]->[slowmode][down  player][]\n[slowmode][right player][BL]->[slowmode][up    player][]\n\n(slow mode: rotate)\n[slowmode][right player][}]->[slowmode][up player BR  ][}]\n[slowmode][left player ][{]->[slowmode][down player BL][{]\n\nstartloop\n\n(only actuate when not copying)\n[As][moving player]->[As][player]\n\n(launch either clockwise or counterclockwise)\nrandom [vertical player][S no kitemachine]->[vertical player][S =]\nup   [down player][S =| S no = no kitemachine]->[down player][S | S =]\ndown [up   player][S =| S no = no kitemachine]->[up   player][S | S =]\nhorizontal [S =|S no =]->[S =| S =]\n\n(be ready to launch)\n[vertical player][» ]->[vertical Player][L »]\n\n(don't move player vertically when launching)\n[vertical player]->[player rotated]\n\n(switch flow)\n[Wv Fw][»]->[Wv Fw][L »]\n[Wv]->[]\n\n(Swap Source/Target Phases)\n(---------------------------------------------------)\n\n(toggle kite launcher direction)\n[Flip360][=]->[Flip360][]\n[Flip360][« S no X]->[Flip360][» S X]\n[Flip360][» S no X]->[Flip360][« S X]\n[Flip360][Fw no X]->[Flip360][Rv X]\n[Flip360][Rv no X]->[Flip360][Fw X]\n[X]->[]\n\n(clean target area before copying)\n[Flip360][Fw][T Copyable]->[Flip360][Fw][T no Copyable]\n[Flip360][Rv][S Copyable]->[Flip360][Rv][S no Copyable]\n\n(remove auxiliary marks and kites)\n[Flip360][Passed]->[Flip360][]\n[Flip360 As][Fw]->[][Wv Fw]\n[Flip360 As]->[]\n\n(Kite copy items)\n(---------------------------------------------------)\n[Fw][As S CopyAble][As T ]->[Fw][As S CopyAble][As T CopyAble]\n[Rv][As T CopyAble][As S ]->[Rv][As T CopyAble][As S CopyAble]\n\n[F]->[]\n[M]->[]\n[As no M]->[As M] (move only once)\n\n(move forward)\nright [M Ar | no Filled]->[ Passed | Ar no @]\nup    [M Au | no Filled]->[ Passed | Au no @]\nleft  [M Al | no Filled]->[ Passed | Al no @]\ndown  [M Ad | no Filled]->[ Passed | Ad no @]\n\n(indicate change of direction upon hitting wall or already visited area)\nright [M Ar | Filled]->[ Aar | Filled]\nup    [M Au | Filled]->[ Aau | Filled]\nleft  [M Al | Filled]->[ Aal | Filled]\ndown  [M Ad | Filled]->[ Aad | Filled]\n\n(trigger when full area is covered)\n[Flip270 F]->[Flip360 F] (360º)\n[Flip180 F]->[Flip270 F]\n[Flip90  F]->[Flip180 F]\n[no @    F]->[Flip90  F]\n\n(actually change direction)\n[Aar]->[Ad no F]\n[Aad]->[Al no F]\n[Aal]->[Au no F]\n[Aau]->[Ar no F]\n\n\n(Kite movements)\n(---------------------------------------------------)\n(launch new kite = start copying!)\nright[L » | Area no =]->[no L » |Area Ar]\ndown [L » | Area no =]->[no L » |Area Ad]\nup   [L » | Area no =]->[no L » |Area Au]\nleft [L » | Area no =]->[no L » |Area Al]\n[L »][Area =]->[»][Area]\nendloop\n(----------------------------------------------------\n--------------END OF COPY MECHANISM -----------------\n----------------------------------------------------)\n\n\n(----------------------------------------------------\n----------------- GAME RULES ------------------------\n----------------------------------------------------)\n\n(---Decorate floor and borders---)\n[Player no tiles]->[Player tile4]\nstartloop\nright [tile1|no tiles]->[tile1|tile4]\nright [tile2|no tiles]->[tile2|tile3]\nright [tile3|no tiles]->[tile3|tile2]\nright [tile4|no tiles]->[tile4|tile1]\n\nup    [tile1|no tiles]->[tile1|tile2]\nup    [tile2|no tiles]->[tile2|tile4]\nup    [tile3|no tiles]->[tile3|tile1]\nup    [tile4|no tiles]->[tile4|tile3]\n\nleft  [tile1|no tiles]->[tile1|tile4]\nleft  [tile2|no tiles]->[tile2|tile3]\nleft  [tile3|no tiles]->[tile3|tile2]\nleft  [tile4|no tiles]->[tile4|tile1]\n\ndown  [tile1|no tiles]->[tile1|tile3]\ndown  [tile2|no tiles]->[tile2|tile1]\ndown  [tile3|no tiles]->[tile3|tile4]\ndown  [tile4|no tiles]->[tile4|tile2]\nendloop\n\n[Kitemachine no wall]->[kitemachine wall]\nright [wall | no wall no S no Kitemachine]-> [wall borderR | ]\nup    [wall | no wall no S no Kitemachine]-> [wall borderU | ]\nleft  [wall | no wall no S no Kitemachine]-> [wall borderL | ]\ndown  [wall | no wall no S no Kitemachine]-> [wall borderD | ]\n\nright [a |no a]-> [a borderR | ]\nup    [a |no a]-> [a borderU | ]\nleft  [a |no a]-> [a borderL | ]\ndown  [a |no a]-> [a borderD | ]\n\nright [e |no e]-> [e borderR | ]\nup    [e |no e]-> [e borderU | ]\nleft  [e |no e]-> [e borderL | ]\ndown  [e |no e]-> [e borderD | ]\n\nright [i |no i]-> [i borderR | ]\nup    [i |no i]-> [i borderU | ]\nleft  [i |no i]-> [i borderL | ]\ndown  [i |no i]-> [i borderD | ]\n\nright [o |no o]-> [o borderR | ]\nup    [o |no o]-> [o borderU | ]\nleft  [o |no o]-> [o borderL | ]\ndown  [o |no o]-> [o borderD | ]\n\nright [u |no u]-> [u borderR | ]\nup    [u |no u]-> [u borderU | ]\nleft  [u |no u]-> [u borderL | ]\ndown  [u |no u]-> [u borderD | ]\n\nright [y |no y]-> [y borderR | ]\nup    [y |no y]-> [y borderU | ]\nleft  [y |no y]-> [y borderL | ]\ndown  [y |no y]-> [y borderD | ]\n\n\n(---Twinkle stars---)\n[S6 stsh]->[S7 no stsh]\n[S5 stsh]->[S6 no stsh]\n[S4 stsh]->[S5 no stsh]\n[S3 stsh]->[S4 no stsh]\n[S2 stsh]->[S3 no stsh]\n[S1 stsh]->[S2 no stsh]\nrandom [stardust no stsh]->[stardust stsh]\n\nrandom [StarArea no Stardust no Star]->[StarArea S1]\n[Stardust no Star|Stardust Star]->[|Stardust Star]\n\n[StarArea no star S7]->[StarArea star S1]\n[StarArea star S7]->[StarArea no star no stardust]\n\n[Star no stararea]->[]\n[Stardust no stararea]->[]\n[Starshine no stararea]->[]\n\n\n(----------------------------------------------------\n------------------- BLOCKS RULES --------------------\n----------------------------------------------------)\n\n[stationary player][block]->[stationary player][down block]\n[stationary player]->[down player]\n[waitgravity][moving item]->[waitgravity][item]\n\nstartloop\n(Push)\n(---------------------------------------------------)\nleft  [left  Pusher | stationary Pushable no FixedL]->[left  Pusher| left  Pushable FromL]\nup    [up    Pusher | stationary Pushable no FixedU]->[up    Pusher| up    Pushable FromU]\nright [right Pusher | stationary Pushable no FixedR]->[right Pusher| right Pushable FromR]\ndown  [down  Pusher | stationary Pushable no FixedD]->[down  Pusher| down  Pushable FromD]\n\nleft  [left  Pusher| UnPushable]->[stationary Pusher FixedL| UnPushable FromL]\nup    [up    Pusher| UnPushable]->[stationary Pusher FixedU| UnPushable FromU]\nright [right Pusher| UnPushable]->[stationary Pusher FixedR| UnPushable FromR]\ndown  [down  Pusher| UnPushable]->[stationary Pusher FixedD| UnPushable FromD]\n\n(Block integrity)\n(---------------------------------------------------)\nright [ Fixed block no borderR | block no borderL ]-> [Fixed block | Fixed block ]\nup    [ Fixed block no borderU | block no borderD ]-> [Fixed block | Fixed block ]\nleft  [ Fixed block no borderL | block no borderR ]-> [Fixed block | Fixed block ]\ndown  [ Fixed block no borderD | block no borderU ]-> [Fixed block | Fixed block ]\n\nright [ From block no borderR | block no borderL ]-> [From block | From block ]\nup    [ From block no borderU | block no borderD ]-> [From block | From block ]\nleft  [ From block no borderL | block no borderR ]-> [From block | From block ]\ndown  [ From block no borderD | block no borderU ]-> [From block | From block ]\n\nright [ moving block no borderR | block no borderL ]-> [moving block | moving block ]\nup    [ moving block no borderU | block no borderD ]-> [moving block | moving block ]\nleft  [ moving block no borderL | block no borderR ]-> [moving block | moving block ]\ndown  [ moving block no borderD | block no borderU ]-> [moving block | moving block ]\n\n\n(Prevent unacomplished moves: Part 1)\n(---------------------------------------------------)\nleft  [left  Pusher | FixedL]->[left  Pusher FixedL| FixedL]\nup    [up    Pusher | FixedU]->[up    Pusher FixedU| FixedU]\nright [right Pusher | FixedR]->[right Pusher FixedR| FixedR]\ndown  [down  Pusher | FixedD]->[down  Pusher FixedD| FixedD]\n\n(Prevent unacomplished moves: Part 2)\n(---------------------------------------------------)\nleft  [left  Pushable FixedL]->[stationary Pushable FixedL ]\nup    [up    Pushable FixedU]->[stationary Pushable FixedU ]\nright [right Pushable FixedR]->[stationary Pushable FixedR ]\ndown  [down  Pushable FixedD]->[stationary Pushable FixedD ]\n\n(Prevent unacomplished moves: Part 3)\n(---------------------------------------------------)\nleft  [Pusher FixedL | FromL]->[Pusher FixedL FromL| FixedL FromL]\nup    [Pusher FixedU | FromU]->[Pusher FixedU FromU| FixedU FromU]\nright [Pusher FixedR | FromR]->[Pusher FixedR FromR| FixedR FromR]\ndown  [Pusher FixedD | FromD]->[Pusher FixedD FromD| FixedD FromD]\n\n[left  Pusher FixedL FromL]->[stationary Pusher FixedL FromL]\n[up    Pusher FixedU FromU]->[stationary Pusher FixedU FromU]\n[right Pusher FixedR FromR]->[stationary Pusher FixedR FromR]\n[down  Pusher FixedD FromD]->[stationary Pusher FixedD FromD]\n\n\nendloop\n\n[Fixed]->[]\n[From]->[]\n\n[> Pushable border] -> [> Pushable > border]\n\nrandom [down Pushable][]->[down Pushable][fallen]\n\n\n==============\nWINCONDITIONS\n==============\n\nall Goal on Player\n\n=======     \nLEVELS\n=======\n\nmessage Reach the goal! (marked X)\nmessage \"Left and right arrows to move...\"\nmessage \"... Up and Down to rotate!\"\nmessage \"(X to toggle preview mode)\"                                      \n\nmessage There are only 7 levels.\nmessage Good luck!\n\nmessage Level 1 *\nmessage \"Fall for it\"\n###########################«#\n#########»........#»++...+++#\n##########........##+.....++#\n##########........##+..+..++#\n##########........##++.*.+++#\n##########........##++.p.+++#\n##########........##+..+..++#\n##########........##+.....++#\n##########........##++...+++#\n####################«########\n\nmessage Level 2 *\nmessage \"Crates and craters\"\n########################«#\n########».......#»o.....p#\n#########.......##+.....+#\n#########.......##+.....+#\n#########.......##+..*..+#\n#########.......##+.....+#\n#########.......##+.....+#\n#########.......##u.....e#\n##################«#######\n\nmessage Level 3 **\nmessage \"Room for manoeuvre\"\n##################«#\n######».....#»+++++#\n#######.....##oee.*#\n#######.....##o+.+i#\n#######.....##p.aai#\n#######.....##+++++#\n##############«#####\n\nmessage Level 4 **\nmessage \"Be Houdini\"\n###############«#\n#####»....#»...*#\n######....##yyy.#\n######....##yPy.#\n######....##yoy.#\n############«####\n\nmessage level 5 **\nmessage \"Cut the Knot\"\n############################«#\n##########»........#»...+....#\n###########........##.*.++...#\n###########........##........#\n###########........##++iaaa++#\n###########........##.+iiia+.#\n###########........##........#\n###########........##...++...#\n###########........##u..+...P#\n#####################«########\n\nmessage level 6 *** \nmessage \"Toying around\"\n##################«#\n######».....#»++*++#\n#######.....##++io+#\n#######.....##+.uy+#\n#######.....##+ae++#\n#######.....##++P++#\n##############«#####\n\nmessage level 7 ****\nmessage \"Shuriken\"\n##################«#\n######».....#»+++*+#\n#######.....##.eei+#\n#######.....##yo.i.#\n#######.....##+oaau#\n#######.....##+p+++#\n##############«#####\n\nmessage Congratulations!\nmessage * * * * *  Whirlpuzzle  * * * * *                                Pedro PSI 2018\nmessage * * * * * * * Music * * * * * * *                                   I'm in Space!   by   Tim Beek\nmessage Thank you for playing!";