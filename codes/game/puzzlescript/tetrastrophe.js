var sourceCode="title Tetrastrophe\nauthor Pedro PSI\nhomepage pedropsi.github.io\n(License: Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0))\n\nbackground_color #705400 (brown)\ntext_color #FFC30F (yellow)\n\nrealtime_interval 0.3\nnoundo\n\n((Palette)\n(---------------------------------------------------)\n#FF0F0F (red)\n#A50000 (dark red)\n\n#705400 (brown)\n#453400 (dark brown)\n\n#FFC30F (yellow)\n\n#316500 (dark green)\n#7AEC0D (green)\n\n\n#FF9703 (player orange) \n#FF8403 (pdayer orange)\n)\n\n\n========\nOBJECTS\n========\nBackground .\n#453400 (dark brown)\n\nWall #\n#705400 (brown)\n\nFloor\n#705400 (brown)\n\nGate\n#705400 (brown)\n00000\n.0.0.\n00.00\n.000.\n.....\n\n\nPlayer\n#FF9703 (player orange) #FF8403 (pdayer orange)\n.000.\n00000\n10001\n.111.\n.1.1.\n\nPlayerLegs\n#FF9703 (player orange) #FF8403 (pdayer orange)\n.1.1.\n.1.1.\n.1.1.\n.1.1.\n.0.0.\n\n\nCopyStart\n#FF0F0F (red)\n00.00\n0...0\n..0..\n0...0\n00.00\n\nCopyStartSpawn\n#FF0F0F (red)\n.....\n.0.0.\n.....\n.0.0.\n.....\n\n\nCopyTarget\n#316500 (dark green)\n.....\n.....\n.....\n...0.\n.....\n\nCopyTargetSpawn\n#7AEC0D (green)\n.....\n.0...\n.....\n.....\n.....\n\nCopySource\n#316500 (dark green)\n.....\n.0...\n.....\n.....\n.....\n\nFill\nBlue\n.....\n.....\n..0..\n.....\n.....\n\nFillV\nBlue\n.....\n.....\n..0..\n..0..\n..0..\n\nlast\nBlue\n.....\n.0.0.\n..0..\n.0.0.\n.....\n\nPiece\n#FFC30F (yellow)\n\nPieceFixed\n#FF8403 (pdayer orange)\n\nFrozen\n#FF9703 (player orange)\n\nBegin\n#A50000 (dark red)\n.....\n..00.\n..00.\n.....\n.....\n\nReference\n#7AEC0D (green)\n.....\n.....\n..0..\n.....\n.....\n\nRotate\n#FF0F0F (red)\n.....\n..0..\n...0.\n.....\n.....\n\ntouched\n#7AEC0D (green)\n.....\n..0..\n.0.0.\n..0..\n.....\n\ndidnottouch\n#FF0F0F (red)\n.....\n.0.0.\n..0..\n.0.0.\n.....\n\nLineDetector\ntransparent\n(#453400 (dark brown)\n.....\n.....\n..0..\n.....\n.....)\n\nToDelete\n#FF0F0F (red)\n....0\n.0.0.\n.....\n.0.0.\n0....\n\nFlag X\n#705400 (brown) #FF0F0F (red)\n.....\n.011.\n.011.\n.0...\n.0...\n\n\nreferenceDown \n#FF0F0F (red)\n..0..\n...0.\n....0\n.....\n.....\n\nreferenceLeft \n#FF0F0F (red)\n.....\n.....\n....0\n...0.\n..0..\n\nreferenceUp\n#FF0F0F (red)\n.....\n.....\n0....\n.0...\n..0..\n\nreferenceRight\n#FF0F0F (red)\n..0..\n.0...\n0....\n.....\n.....\n\n\n=======\nLEGEND\n=======\n- = Gate\nW = Wall and Floor\nM = Wall and Floor and LineDetector\n» = Wall and LineDetector\n\nC = Copystart and CopySource \nÇ = Copystart and CopyTarget and CopyStartSpawn\n: = CopyTarget and CopyTargetSpawn\n, = CopySource\n\n+ = Piece and CopySource\n* = PieceFixed and floor\n\nT = Touched\n\nCopyable = Piece \nCopyZone = CopyTarget or CopySource\nSpawner  = CopytargetSpawn or CopystartSpawn\n\nAnyTouch = Touched or DidNotTouch\nObstacle = Wall or Floor or Player or PlayerLegs\n\n2 = C and referenceUp\n3 = C and referenceLeft\n4 = C and referenceDown\n5 = C and referenceRight\n\nReferenceDir = referenceUp or referenceLeft or referenceDown or referenceRight\n\nCantRotate = Wall or Floor or PieceFixed or Player\n\nP = Player\n\n=======\nSOUNDS\n=======\n\n================\nCOLLISIONLAYERS\n================\nBackground\nSpawner, X\nCopySource, CopyTarget\nCopyStart\nBegin\nRotate\nFloor\nPiece, Wall, AnyTouch, PieceFixed, Player, PlayerLegs\nFill\nFillV\nLast \nToDelete\nFrozen,LineDetector\nReference\nReferenceDir, Gate\n\n======\nRULES\n======\n\n[frozen Player]-> restart\n\n\n(Pressing X to Start or Rotate)\n(»»»»»»»»»»»»»»»»»»»»»»»»»»»)\n[rotate]->[no rotate]\n[action player][X]-> [action player][X rotate begin]\n\n(Rotate Current Piece)\n(»»»»»»»»»»»»»»»»»»»»»»»»»»»)\n\n horizontal[Reference 5|...|2][rotate]->[5|...| Reference 2][begin]\n horizontal[Reference 2|...|3][rotate]->[2|...| Reference 3][begin]\n horizontal[Reference 3|...|4][rotate]->[3|...| Reference 4][begin]\n horizontal[Reference 4|...|5][rotate]->[4|...| Reference 5][begin]\n (extras for less than 4 pieces)\n horizontal[Reference 5|...|4][rotate]->[5|...| Reference 4][begin]\n  horizontal[Reference 3|...|5][rotate]->[3|...| Reference 5][begin]\n\n\n(Chosing P#FF0F0F (red)icted Rotated Piece)\n(»»»»»»»»»»»»»»»»»»»»»»»»»»»)\n[Reference CopySource Copystart][ Copystart CopyTarget][begin] -> [Reference CopySource Copystart  Last Fill][Copystart CopyTarget Last Fill][no begin]\n\n(Chosing a New Piece Randomly)\n(»»»»»»»»»»»»»»»»»»»»»»»»»»»)\nrandom [ Copystart CopySource][ Copystart CopyTarget][begin] -> [Copystart Reference CopySource Last Fill][Copystart CopyTarget Last Fill][no begin]\n        \n       \n(Overwriting the New Piece - here is where the magic happens)\n(»»»»»»»»»»»»»»»»»»»»»»»»»»»)\nstartloop\nhorizontal [ Last Fill | no Fill CopyZone]-> [no Last Fill | Last Fill CopyZone]\n\n+ horizontal [ Last Fill no FillV| no CopyZone]-> [ Last Fill FillV | no CopyZone ]\n+ [ Last Fill CopySource no Copyable][ Last Fill CopyTarget Copyable]-> [ Last Fill CopySource no Copyable][ Last Fill CopyTarget no Copyable no CantRotate]\n+ [ Last Fill CopySource Copyable][ Last Fill CopyTarget no Copyable no CantRotate]-> [ Last Fill CopySource Copyable][ Last Fill CopyTarget Copyable]\n+ [ Last Fill CopySource Copyable][ Last Fill CopyTarget CantRotate][player]-> cancel\n\nvertical [ Last Fill FillV| no Fill CopyZone] -> [ no Last Fill no FillV| Last Fill CopyZone]\n+ [ Last Fill CopySource no Copyable][ Last Fill CopyTarget Copyable]-> [ Last Fill CopySource no Copyable][ Last Fill CopyTarget no Copyable no CantRotate]\n+ [ Last Fill CopySource Copyable][ Last Fill CopyTarget no Copyable no CantRotate]-> [ Last Fill CopySource Copyable][ Last Fill CopyTarget Copyable]\n+ [ Last Fill CopySource Copyable][ Last Fill CopyTarget CantRotate][player]-> cancel\nendloop\n\n[Fill ]->[no fill ]\n[FillV]->[no fillV]\n[last ]->[no last ]\n\n\n(Gravity & Control)\n(»»»»»»»»»»»»»»»»»»»»»»»»»»»)     \n[stationary piece no CopySource]->[down piece]\n[moving player][piece no CopySource]-> [moving player][moving piece] \n[moving player][moving piece]->[moving player][moving piece] (stop player)\n[up piece]-> [stationary piece]\n\n[action player][piece no CopySource]->[player][stationary piece]\n\n(player Giraffe)\ndown [player| no cantrotate no playerlegs]->[down player| no cantrotate  no playerlegs]\ndown [up player | playerlegs]->[stationary player| playerlegs] \ndown [down player | playerlegs]->[stationary player| no playerlegs] \ndown [horizontal player|playerlegs]->[horizontal player| no playerlegs]\ndown [no cantrotate no Piece| up player|cantrotate]->[player| playerlegs|cantrotate]\n\n[stationary player]->[down player]\n\n(Avoid piece breakup on horizontal collision with walls/obstacles)\nhorizontal [obstacle | < piece][no frozen piece no CopySource]->[ obstacle | < piece][ frozen piece]      \n           \n           [frozen moving piece]->[ stationary piece]\n\n(Move the area of rotation along)\n[moving piece][stationary CopyStart CopyTarget]->[moving piece][moving CopyStart moving CopyTarget]\n[moving piece][stationary CopyTarget]->[moving piece][moving CopyTarget]\n\n\n\n(Piece Touches the floor)\n(»»»»»»»»»»»»»»»»»»»»»»»»»»»)\n     [Touched]->[DidNotTouch]\n     \ndown [down piece | Floor][AnyTouch]->[stationary PieceFixed| Floor][Touched]        \n     \n     [Touched] [piece no copysource]->[Touched] [stationary piecefixed stationary Floor]\n     \n     [piece | PieceFixed no Floor ]->[stationary PieceFixed | PieceFixed]\n     [Floor | PieceFixed no Floor ]->[stationary Floor | PieceFixed Floor]\n\n[Touched][CopyStart CopyTarget]->[Touched][no CopyStart no CopyTarget]\n[Touched][CopyTarget]->[Touched][no CopyTarget]\n\n\n           \n(Detect and delete complete lines)\n(»»»»»»»»»»»»»»»»»»»»»»»»»»»)\n      [LineDetector no wall] -> [no LineDetector no wall] \nright [LineDetector| no LineDetector PieceFixed Floor ]->[LineDetector| Linedetector PieceFixed Floor]\n(right [LineDetector no wall| wall][numberstart]->[ToDelete LineDetector| wall][plus numberstart])\nright [LineDetector no wall| wall]->[ToDelete LineDetector| wall]\n\nright [LineDetector no wall| ToDelete LineDetector]->[ToDelete LineDetector| ToDelete LineDetector]\n\n      [ToDelete PieceFixed Floor] -> [ToDelete]\nup    [ToDelete no PieceFixed no Floor | PieceFixed Floor] -> [ToDelete PieceFixed Floor| ]\nup    [ToDelete |no PieceFixed no Floor |PieceFixed Floor] -> [ToDelete|PieceFixed Floor| ]\nup    [ToDelete |...|no PieceFixed no Floor |PieceFixed Floor] -> [ToDelete|...|PieceFixed Floor| ]\n\n      [LineDetector ToDelete] -> []\n              \n(What happens when a piece touches the ceiling)\n(»»»»»»»»»»»»»»»»»»»»»»»»»»»)\n[PieceFixed gate ][Player]->[PieceFixed gate ][frozen Player] message Retry Level?\n\n(respawn area around new piece to be copied)\n[Touched][no CopyStart CopyStartSpawn]->[Touched][ CopyTarget CopyStart CopyStartSpawn] \n[Touched][no CopyTarget CopyTargetSpawn]->[Touched][ CopyTarget CopyTargetSpawn]\n\n[Touched][X]->[Touched][X Begin]  (draw new piece)\n[Touched][Reference]->[Touched][no Reference]\n\n\n(Player die)\n(»»»»»»»»»»»»»»»»»»»»»»»»»»»)\ndown [down piece | Player no X]->[| Frozen Player] message You died. Retry?\n\n[Player X]->win\n\n\n==============\nWINCONDITIONS\n==============\n\n=======\nLEVELS\n=======\n\nmessage The red flag must be yours!                                 ''''''''''''''''''''''''''''''''''>Press X when ready to face the Catastrophe.\nmessage level 1                                   ''''''''''''''''''''''''''''''''''\"The Basics\"\n\n##################\n#...Ç::...###C,,##\n#...:::...###+++##\n#...:::...###,,,##\n#---------########\n»..........#######\n»..........#######\n»..........#######\n»..........#######\n».P.......X#######\n#WWM......W#######\n##T»......########\n###»......########\n###WWWWWWW########\n##################\n\nmessage You may have noticed that...                                  ''''''''''''''''''''''''''''''''''full horizontal lines disappear.\nmessage level 2                                   ''''''''''''''''''''''''''''''''''\"Think twice\"\n\n##################\n#...Ç::...###C,,##\n#...:::...###,++##\n#...:::...###,++##\n#---------########\n»..........#######\n»..........#######\n»..........#######\n»..........#######\n».P.......X#######\n#WWM......W#######\n##T»......########\n###»......########\n###WWWWWWW########\n##################\n\n\nmessage How about a little twist?                               ''''''''''''''''''''''''''''''''''>Press X to rotate any falling piece.\nmessage level 3                                   ''''''''''''''''''''''''''''''''''\"A little twist\"\n\n#########################\n##.Ç::::.####5,,,,#4,+,,#\n##.:::::.####,,,,,#,,+,,#\n##.:::::.####++++,#,,+,,#\n##.:::::.####,,,,,#,,+,,#\n##.:::::.####,,,,,#,,,,,#\n##-------################\n#»........###############\n#»........###############\n#»........###############\n#»........###############\n#»........###############\n#».......X###############\n#».PM....W###############\n##WW»....################\n###»......###############\n###»......###############\n###»......###############\n##T#M....W###############\n####WWWWW################\n#########################\n#########################\n\n\nmessage level 4                                   ''''''''''''''''''''''''''''''''''\"The Great Wall\"\n\n#############################\n##..Ç::..###5+,#2,,#3,,#4+,##\n##..:::..###++,#++,#,++#,++##\n##..:::..###,,,#,+,#,+,#,,,##\n##-------####################\n#».............###.........##\n#».............###.........##\n#».............###.........##\n#».............***.........##\n#».............***.........##\n#».............***.........##\n#»....P........***....X....##\n##WWWWWWWWM....***WWWWWWWWW##\n#########T»....**W###########\n##########»....*W############\n###########WWWWW#############\n#############################\n\n\nmessage Actually, \"rotation\" can be interpreted in a broader sense.                               ''''''''''''''''''''''''''''''''''>Press X to \"rotate\" any falling piece.\nmessage level 5                                   ''''''''''''''''''''''''''''''''''\"Bridging the gap\"\n\n#######################################\n###5++++#2,,++####Ç::::####3,+++#4++++#\n###+++++#,,,++####:::::####,,+,+#,++++#\n###++,++#,,,,,####:::::####,,+++#,++++#\n###+++++#,,,,,####:::::####,,,,,#,++++#\n###+++++#,,,,,####:::::####,,,,,#,,,,,#\n##################-----################\n##»...................................#\n##»...................................#\n##»...................................#\n##»...................................#\n##»...................................#\n##».P...............................X.#\n##»WWWWWWW»....................MWWWWWW#\n#########T»....................########\n##########»....................########\n##########»....................########\n##########»....................########\n######WWWWWWWWWWWWWWWWWWWWWWWWWWWWW####\n#######################################\n#######################################\n#######################################\n\n\nmessage You are on your own now. Good luck!                               '''''''''''''''''''''''''''''''''\nmessage level 6                                   ''''''''''''''''''''''''''''''''''\"U2\"\n\n#################################\n##5,,,,#2,,,,####Ç::::####3,,,,##\n##+,,,+#,+,+,####:::::####,,+,,##\n##+,,,+#,+,+,####:::::####,,,,,##\n##+,,,+#,+++,####:::::####,,,,,##\n##+,,,+#,,,,,####:::::####,,,,,##\n##+++++#,,,,,####:::::####,,,,,##\n#################-----###########\n#».............................##\n#».P...........................##\n#».............................##\n#».............................##\n#».............................##\n#».............................##\n#».............................##\n#»..........................X..##\n#»WWWWWWM...WWWWM.....WWWWWWWWW##\n########»...##T#».....###########\n########»...####».....###########\n#########WWW####».....###########\n################».....###########\n#################WWWWW###########\n#################################\n#################################\n#################################\n\n\nmessage level 7                                   ''''''''''''''''''''''''''''''''''\"The Great Pyramid\"\n\n###################\n#5++###.Ç::.###4+,#\n#++,###.:::.###,++#\n#5,,###.:::.###4,+#\n#######-----#######\n».................#\n».................#\n».................#\n».................#\n».................#\n»........P........#\n»........*........#\n».......***.......#\n»......**X**......#\n#WWWWWWWWWWWWWWWWW#\n#########T#########\n\n\nmessage level 8                                   ''''''''''''''''''''''''''''''''''\"Entrapped\"\n\n#########################\n#5,,,,####Ç::::####4,,,,#\n#,+++,####:::::####,+++,#\n#,+++,####:::::####,+++,#\n#,+++,####:::::####,+,+,#\n#,,,,,####:::::####,,,,,#\n##########-----##########\n###».................####\n###».................####\n###».................####\n###».................####\n###».................####\n###».................####\n###»......M...M......####\n###»......»...»......####\n###».P....».X.»......####\n#WWWWWWWWWWWWWWWWWWWWWWW#\n############T############\n\n\nmessage level 9                                   ''''''''''''''''''''''''''''''''''\"Something Missing\"\n\n###########\n#5#4#Ç#3#2#\n#+#+#:#+#+#\n#+#+#:#+#,#\n#+#+#:#,#,#\n#+#,#:#,#,#\n#####-#####\n#».......##\n#».......##\n#».......##\n#».......##\n#».......##\n#».......##\n#».......##\n#».......##\n#P.......X#\n#M.......W#\n#».......##\n#».......##\n#».......##\n#».......##\n#».......##\n#».......##\n#».......##\n##WWWWWWW##\n#####T#####\n\n\nmessage level 10 - last level                                  ''''''''''''''''''''''''''''''''''\"Impossible Climb\"\n\n#######################\n#4,,##Ç::##5+,#2+,#3+,#\n#+++##:::##++,#+++#,++#\n#,+,##:::##,+,#,,,#,+,#\n######---##############\n####».....#############\n####».....#############\n####.......############\n####M.....W############\n###».......############\n##»X.......############\n###M.......############\n####.......############\n####.......############\n###»........#T#########\n###».......W###########\n###».......############\n###»...P...############\n####WWWWWWW############\n#######################\n\n\nmessage Congratulations!\n\nmessage Coding & Design                                   ''''''''''''''''''''''''''''''''''Pedro PSI   2014\n \nmessage Music:                                   ''''''''''''''''''''''''''''''''''Arpology 1: Frantic Sax Version by Longzijun\n \nmessage Thank you for playing Tetrastrophe!                                    ''''''''''''''''''''''''''''''''''Inspired by Tetris\n";